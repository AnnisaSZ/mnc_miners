<odoo>

    <record id="list_report_emp_view_tree" model="ir.ui.view">
        <field name="name">List Report Employee</field>
        <field name="model">wbs.report.emp</field>
        <field name="arch" type="xml">
            <tree duplicate="0" decoration-success="state in ('close')" decoration-warning="state in ('report_audit','result_audit')">
                <field name="name"/>
                <field name="title"/>
                <field name="employee_id"/>
                <field name="company_id"/>
                <field name="start_date"/>
                <field name="end_date"/>
                <field name="state"  readonly="1" widget="badge"/>
            </tree>
        </field>
    </record>
    
    <record id="list_report_emp_view_form" model="ir.ui.view">
        <field name="name">List Report Employee Form</field>
        <field name="model">wbs.report.emp</field>
        <field name="arch" type="xml">
            <form>
                <header>
                    <field name="list_head_report_id" invisible="1"/>
                    <field name="is_head" invisible="1"/>
                    <field name="is_dir" invisible="1"/>
                    <field name="from_head" invisible="1"/>

                    <button name="button_report_audit" string="Submit" type="object" class="oe_highlight" attrs="{'invisible': [('state', 'not in', ('process_audit','assigned'))]}"/>

                    <field name="state" readonly="True" widget="statusbar" options="{'clickable': '0'}" statusbar_visible="assigned,process_audit,close"/>

                </header>
                <sheet>
                    <label for="name"/>
                    <h1>
                        <field name="name"/>
                    </h1>
                    
                    <!-- Case Report From User -->
                    <h3> Case Reported </h3>
                    <group>
                        <group>
                            <field name="title"/>
                            <field name="company_id"/>
                        </group>
                        <group>
                            <label for="start_date" string="Period of Incident"/>
                            <div>
                                <field name="start_date" class="oe_inline"/>
                                <i class="fa fa-long-arrow-right mx-2" aria-label="Arrow icon" title="Arrow"/> 
                                <field name="end_date" class="oe_inline"/>
                            </div>
                            <field name="casedescription" readonly="True"/>
                        </group>
                    </group>
                    <notebook>
                        <page string="Attachment" name="attchment">
                            <field name="attachment_ids" options="{'no_open': True}" readonly="1">
                                <tree editable="bottom" options="{'no_create': True, 'no_create_edit': True, 'no_open': True}">
                                    <field name="name" readonly="1"/>
                                    <field name="datas" widget="binary" string="Download"/>
                                </tree>
                            </field>
                        </page>
                    </notebook>

                    <!-- Director -->
                    <h3> Director Review </h3>
                    <group>
                        <group>
                            <field name="director_id"/>
                            <field name="dir_notes" attrs="{'readonly': ['|',('state', '!=', 'report_audit'),('is_dir','=',False)]}"/>
                        </group>
                        <group>
                            <label for="start_date_audit" string="Period of Audit"/>
                            <div>
                                <field name="start_date_audit" class="oe_inline" readonly="1"/>
                                <i class="fa fa-long-arrow-right mx-2" aria-label="Arrow icon" title="Arrow"/> 
                                <field name="end_date_audit" class="oe_inline" readonly="1"/>
                            </div>
                        </group>
                    </group>
                    <group>
                        <field name="dir_attachment_ids" readonly="1" string="Director Attach.">
                            <tree editable="bottom" >
                                <field name="part_dokumen" filename="part_filename" widget="binary"/>
                                <field name="part_filename" readonly="1" invisible="1" force_save="1"/>
                            </tree>
                        </field>
                    </group>

                    <!-- Head Audit (if assign from head audit) -->
                    <h3> Head Auditor Review </h3>
                    <group>
                        <group>
                            <field name="head_auditor_id" readonly="True"/>
                            <field name="head_auditor_notes"/>
                        </group>
                        <group>
                            <field name="employee_id" attrs="{'readonly': [('state', '!=', 'assigned')]}"/>
                            <field name="user_employee_id" invisible="1" attrs="{'readonly': ['|',('state', '!=', 'assigned'),('is_head', '=', True)]}"/>
                        </group>
                    </group>
                    <group>
                        <field name="head_auditor_attachment_ids" readonly="1" string="Head Auditor Attach."  attrs="{'readonly': [('is_head', '=', False)]}">
                            <tree editable="bottom" >
                                <field name="part_filename" readonly="1" invisible="1" force_save="1"/>
                                <field name="part_dokumen" filename="part_filename" widget="binary"/>
                            </tree>
                        </field>
                    </group>

                    <!-- Employee -->
                    <h3>Employee/Auditor</h3>
                    <group>
                        <field name="is_employee" invisible="1"/>
                        <field name="result_auditor_emp" attrs="{'readonly': [('is_employee', '=', False)],'required': [('state', 'in', ['assigned','process_audit','report_audit'])]}"/>
                    </group>
                    <group>
                        <field name="emp_attachment_ids" options="{'no_open': True}" string="Employee Attach." attrs="{'readonly': [('state', '!=', 'process_audit')]}">
                            <tree editable="bottom" >
                                <field name="part_filename" readonly="1" invisible="1" force_save="1"/>
                                <field name="part_dokumen" filename="part_filename" widget="binary"/>
                            </tree>
                        </field>
                    </group>
                </sheet>
            </form>
        </field>
    </record>

    <record id="list_report_emp_view" model="ir.actions.act_window">
        <field name="name">List Reports</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">wbs.report.emp</field>
        <field name="view_mode">tree,form</field>
        <field name="context">{
            'delete': 1,
            'duplicate': 0,
            'create':0
        }
        </field>
        <field name="domain">[('user_employee_id', '=', uid),('state','!=','assigned')]</field>
        <field name="view_ids" eval="[(5, 0, 0),
                (0, 0, {'view_mode': 'tree', 'view_id': ref('list_report_emp_view_tree')}),
                (0, 0, {'view_mode': 'form', 'view_id': ref('list_report_emp_view_form')})]"/>
        <field name="help" type="html">
            <p>
                Add New List Report
            </p>
        </field>
    </record>
</odoo>
